- variables:
  - thirdparty_product
  - experimental_lambda_artifact_id
  - experimental_lambda_function_name
  - default_environment_variables:
      type: map
- module: queue
  name: sqs
  parameters:
    name: sqs
    parameter_group: additional
- module: notifier
  name: sns
  parameters:
    name: sns
    product: "${var.thirdparty_product}"
- module: queue-message
  name: sns-to-sqs
  parameters:
    queue_id: "${module.sqs.id}"
    notifier_id: "${module.sns.id}"
- group:
    parameter_group_name: lambdas
    elements:
    - module: lambda
      name: experimental
      parameters:
        function_name: "${var.experimental_lambda_function_name}"
        artifact_id: "${var.experimental_lambda_artifact_id}"


